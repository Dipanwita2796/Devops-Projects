1)Download the iam policy.json:

curl -O https://raw.githubusercontent.com/kubernetes-sigs/aws-load-balancer-controller/v2.5.4/docs/install/iam_policy.json

2)Create the policy with that json:

aws iam create-policy --policy-name AWSLoadBalancerControllerdnbapp --policy-document file://iam_policy.json

3)Policy arn generated:

{
    "Policy": {
        "PolicyName": "AWSLoadBalancerControllerdnbapp",
        "PolicyId": "ANPARHCA43B57LUEZWHYZ",
        "Arn": "arn:aws:iam::083887970427:policy/AWSLoadBalancerControllerdnbapp",
        "Path": "/",
        "DefaultVersionId": "v1",
        "AttachmentCount": 0,
        "PermissionsBoundaryUsageCount": 0,
        "IsAttachable": true,
        "CreateDate": "2023-09-17T14:52:09+00:00",
        "UpdateDate": "2023-09-17T14:52:09+00:00"
    }
}


4)Create a service account with a role name and attach the policy with that role:

eksctl create iamserviceaccount --cluster=xlrt-b2c-app-us-west-2 --namespace=kube-system --name=aws-load-balancer-controller --role-name AmazonEKSLoadBalancerControllerRolednbapp --attach-policy-arn=arn:aws:iam::083887970427:policy/AWSLoadBalancerControllerdnbapp --approve


5)Check the helm repo chart:

helm repo add eks https://aws.github.io/eks-charts

6)Update the helm repo:

helm repo update eks

7)Install the aws load balancer controller from helm:

helm install aws-load-balancer-controller eks/aws-load-balancer-controller -n kube-system --set clusterName=xlrt-b2c-app-us-west-2 --set serviceAccount.create=false --set serviceAccount.name=aws-load-balancer-controller --set vpcId=vpc-0b0d9d2d25d2e19f4 --set region=us-west-2